# 归档计划和任务总纲

> 当前版本: ver 0.10-beta

本文档记录 CwtshTodo 项目的已完成任务归档。

---

# 归档任务

## [AM01].[核心架构]：（项目基础设置 + 类型定义，✅ 已完成）

### [AM01a].[项目基础设置]

状态：✅ 已完成

优先级：高

需求描述：

- Vite + React 18 + TypeScript + Tailwind CSS 项目初始化
- Zustand 状态管理集成
- IndexedDB 数据持久化
- Framer Motion 动画库集成
- React DnD 拖拽功能

### [AM01b].[类型定义]

状态：✅ 已完成

优先级：高

需求描述：

- Task 任务类型定义
- Category 分类类型定义
- RecurringRule 重复规则类型
- Reminder 提醒类型
- FocusSession 专注记录类型
- Habit/HabitLog 习惯类型

## [AM02].[任务管理]：（任务 CRUD + 高级任务功能 + 任务筛选，✅ 已完成）

### [AM02a].[任务 CRUD]

状态：✅ 已完成

优先级：高

需求描述：

- 创建任务 (TaskForm)
- 编辑任务
- 删除任务
- 完成/恢复任务
- 任务详情（标题、时间、分类、备注）

### [AM02b].[高级任务功能]

状态：✅ 已完成

优先级：高

需求描述：

- 全天任务支持
- 重复任务（日/周/月/年）
- 重复结束日期设置
- 任务提醒（浏览器通知）
- 提醒提前时间设置

### [AM02c].[任务筛选]

状态：✅ 已完成

优先级：高

需求描述：

- 按分类筛选
- 按状态筛选（进行中/已完成/过期）
- 全部任务视图

## [AM03].[分类系统]：（分类管理 + 分类使用，✅ 已完成）

### [AM03a].[分类管理]

状态：✅ 已完成

优先级：高

需求描述：

- 添加分类（名称、颜色、图标）
- 编辑分类
- 删除分类
- 默认分类（工作、学习、生活、运动）

### [AM03b].[分类使用]

状态：✅ 已完成

优先级：高

需求描述：

- 任务关联分类
- 分类颜色标识
- 分类筛选功能

## [AM04].[视图页面]：（Dashboard + Schedule + Tasks + Calendar + Focus + Habits，✅ 已完成）

### [AM04a].[Dashboard]

状态：✅ 已完成

优先级：高

需求描述：

- 今日任务列表
- 进度图表
- 分类列表
- 日历卡片
- 环形计时器
- 搜索框

### [AM04b].[Schedule 页面]

状态：✅ 已完成

优先级：高

需求描述：

- 时间轴视图 (6:00-22:00)
- 日期导航
- 任务可视化
- 分类筛选

### [AM04c].[Tasks 页面]

状态：✅ 已完成

优先级：高

需求描述：

- 全部任务列表
- 状态筛选
- 排序功能
- 批量操作
- 批量完成/删除

### [AM04d].[Calendar 页面]

状态：✅ 已完成

优先级：高

需求描述：

- 月视图日历
- 周视图日历
- 日期导航
- 点击跳转日视图
- 任务指示器

### [AM04e].[Focus 页面]

状态：✅ 已完成

优先级：高

需求描述：

- 番茄钟计时器
- 专注/短休息/长休息模式
- 任务关联
- 专注统计
- 番茄计数
- 音效提示

### [AM04f].[Habits 页面]

状态：✅ 已完成

优先级：高

需求描述：

- 习惯列表
- 添加/编辑/删除习惯
- 周打卡视图
- 连续天数统计
- 完成率计算

## [AM05].[系统功能]：（数据管理 + 设置 + 用户体验，✅ 已完成）

### [AM05a].[数据管理]

状态：✅ 已完成

优先级：中

需求描述：

- 数据持久化到 IndexedDB
- 数据导出 JSON
- 数据导入恢复
- 清除所有数据

### [AM05b].[设置]

状态：✅ 已完成

优先级：中

需求描述：

- 主题切换（浅色/深色/系统）
- 语言设置
- 默认视图设置
- 每周起始日设置
- 提醒开关

### [AM05c].[用户体验]

状态：✅ 已完成

优先级：中

需求描述：

- 加载状态
- 空状态提示
- 键盘快捷键
- 动画效果

## [AM06].[移动端与 PWA]：（PWA 配置 + 移动端适配，✅ 已完成）

### [AM06a].[PWA 配置]

状态：✅ 已完成

优先级：中

需求描述：

- vite-plugin-pwa 配置
- 应用清单 (manifest.json)
- Service Worker
- 离线数据缓存

### [AM06b].[移动端适配]

状态：✅ 已完成

优先级：中

需求描述：

- 响应式侧边栏
- 汉堡菜单
- 底部导航栏
- 触摸优化

## [AM07].[交互增强]：（任务交互增强 + 移动端优化 + 设置增强 + 数据分析，✅ 已完成）

### [AM07a].[任务交互增强]

状态：✅ 已完成

优先级：中

需求描述：

- 任务拖拽调整时间（在日历/时间轴中）
- 快速时间预设（+15分钟/+30分钟/+1小时/+1.5小时）
- 任务批量编辑（批量修改分类、批量完成、批量删除）

### [AM07b].[移动端优化]

状态：✅ 已完成

优先级：中

需求描述：

- 滑动完成任务
- 滑动删除任务
- 长按菜单（支持编辑、完成任务、删除）
- 触摸反馈优化（滑动/点击时触觉反馈）

### [AM07c].[设置增强]

状态：✅ 已完成

优先级：中

需求描述：

- 提示音开关
- 默认任务设置（默认分类、默认时长、全天任务、提醒）
- 紧凑模式开关（任务列表紧凑显示）

### [AM07d].[数据分析]

状态：✅ 已完成

优先级：中

需求描述：

- 周任务统计（完成率、总计）
- 月度完成率图表（环形图展示）
- 专注时长趋势（每日专注时长柱状图）
- 分类完成情况统计

## [AM08].[体验优化]：（快捷键支持 + 任务分享 + 报告生成 + 任务模板 + 自动备份 + 通知增强，✅ 已完成）

### [AM08a].[快捷键支持]

状态：✅ 已完成

优先级：中

需求描述：

- 全局键盘快捷键（n-新建任务、s-设置、/-搜索）
- 快捷键提示面板
- 自定义快捷键设置
- 专注模式下的快捷键禁用

### [AM08b].[任务分享]

状态：✅ 已完成

优先级：中

需求描述：

- 任务导出为文本/链接
- 分享按钮支持 Web Share API

### [AM08c].[报告生成]

状态：✅ 已完成

优先级：中

需求描述：

- 周报生成（完成情况、专注时间、习惯统计）
- 月报生成（月度总结、趋势分析）
- 成就系统（自动生成成就徽章）
- 复制报告/分享功能

### [AM08d].[任务模板]

状态：✅ 已完成

优先级：中

需求描述：

- 创建任务模板（常用任务组合）
- 模板管理（编辑/删除/分类）
- 从模板快速创建任务
- 默认任务模板预设

### [AM08e].[自动备份]

状态：✅ 已完成

优先级：中

需求描述：

- 自动备份开关
- 备份频率设置（每日/每周）
- 保留备份数量限制
- 备份时间设置

### [AM08f].[通知增强]

状态：✅ 已完成

优先级：中

需求描述：

- 任务进行中提醒开关
- 即将过期提醒开关
- 专注时段提醒开关

## [AM09].[交互修复]：（Dashboard 组件修复 + 数据连接修复 + 搜索功能优化，✅ 已完成）

### [AM09a].[Dashboard 组件修复]

状态：✅ 已完成

优先级：高

需求描述：

- 修复 CalendarCard "Add Event" 按钮无响应
  - 文件: `src/components/CalendarCard.tsx:263-265`
  - 问题: 按钮点击事件未绑定
  - 修复: 添加 `onClick={() => onAddTask?.()}` 回调

- 修复 CategoryList 交互无响应
  - 文件: `src/components/CategoryList.tsx:15-38`
  - 问题: 分类项和展开按钮点击事件未绑定
  - 修复: 添加点击事件处理（筛选任务或打开分类管理）

### [AM09b].[数据连接修复]

状态：✅ 已完成

优先级：高

需求描述：

- 连接真实数据到 ProgressChart
  - 文件: `src/components/ProgressChart.tsx`
  - 问题: 硬编码数据 (75%, Focus Time)
  - 修复: 从 store 获取实际统计数据（本周任务完成率、专注时长）

- 连接真实数据到 RingTimer
  - 文件: `src/components/RingTimer.tsx`
  - 问题: 硬编码数据和进度
  - 修复: 从 store 获取实际专注数据和任务完成率

### [AM09c].[搜索功能优化]

状态：✅ 已完成

优先级：中

需求描述：

- 修复搜索结果点击行为
  - 文件: `src/components/SearchBox.tsx:61-64`
  - 问题: 点击搜索结果打开新建任务而非跳转到任务详情
  - 修复: 导航到任务所在日期视图并打开任务编辑

## [AM10].[高级功能（部分）]：（任务优先级 + 白噪音 + 任务导出 + 撤销重做，✅ 已完成）

### [AM10a].[任务优先级设置]

状态：✅ 已完成

优先级：中

需求描述：

- 优先级选项（高/中/低）
- 优先级图标/颜色标识
- 任务表单中可设置优先级
- 任务卡片显示优先级指示器

### [AM10b].[白噪音背景音]

状态：✅ 已完成

优先级：中

需求描述：

- 内置白噪音/粉红噪音/布朗噪音
- Web Audio API 生成，无需音频文件
- 专注模式页面集成
- 音量控制和类型选择
- 偏好设置本地保存

### [AM10c].[任务导出为图片]

状态：✅ 已完成

优先级：中

需求描述：

- Canvas 渲染任务卡片
- 导出 PNG 格式
- 任务卡片快速操作中的导出按钮

### [AM10d].[撤销/重做功能]

状态：✅ 已完成

优先级：中

需求描述：

- 操作历史记录（最多50步）
- 快捷键 Ctrl+Z / Ctrl+Shift+Z
- 支持任务/分类/习惯的撤销重做
- 清空数据时清除历史记录

---

## 版本规划

| 版本 | 主要特性 | 状态 |
|------|----------|------|
| v0.01 | 项目初始化 | ✅ 已归档 |
| v0.02 | 核心架构 + 任务管理 | ✅ 已归档 |
| v0.03 | 分类系统 + Dashboard | ✅ 已归档 |
| v0.04 | 视图页面完善 | ✅ 已归档 |
| v0.05 | 系统功能 + PWA | ✅ 已归档 |
| v0.06 | 移动端优化 | ✅ 已归档 |
| v0.07 | 任务交互增强 | ✅ 已归档 |
| v0.08 | 体验优化 | ✅ 已归档 |
| v0.09 | 交互修复 | ✅ 已归档 |
| v0.10 | 高级功能（部分） | ✅ 已归档 |
| v1.00 | 完整功能版 | ⏳ 待开发 |

## 更新日志

### 版本更新记录

[初始版本]

- 2026-01-06: 项目初始化，版本 v0.01

[v0.02 完成]

- 2026-01-06: 核心架构 + 任务管理，版本 v0.02

[v0.03 完成]

- 2026-01-06: 分类系统 + Dashboard，版本 v0.03

[v0.04 完成]

- 2026-01-06: 视图页面完善，版本 v0.04

[v0.05 完成]

- 2026-01-06: 系统功能 + PWA，版本 v0.05

[v0.06 完成]

- 2026-01-06: 移动端优化，版本 v0.06

[v0.07 完成]

- 2026-01-07: 任务交互增强，版本 v0.07

[v0.08 完成]

- 2026-01-07: 体验优化，版本 v0.08

[v0.09 完成]

- 2026-01-07: 交互修复，版本 v0.09

[v0.10 完成]

- 2026-01-07: 高级功能（任务优先级、白噪音、任务导出、撤销重做），版本 v0.10

[归档完成]

- 2026-01-11: 将已完成任务归档到 Archive.md，版本 v0.10
